<!-- Formulario para agregar curso -->
<div class="bg-white p-8 rounded-lg shadow-lg border border-gray-200">
  <h2 class="text-2xl font-bold text-gray-800 mb-6">Información del Curso</h2>
  <form (ngSubmit)="agregarCurso()" #cursoForm="ngForm" class="space-y-6">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Área -->
      <div>
        <label class="block text-sm font-medium">Área</label>
        <select
          [(ngModel)]="nuevoCurso.area_id"
          name="area_id"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
        >
          <option value="" disabled>Seleccione Área</option>
          <option *ngFor="let area of areas" [value]="area.id">
            {{ area.nombre }}
          </option>
        </select>
      </div>
    
      <!-- Especialidad -->
      <div>
        <label class="block text-sm font-medium">Especialidad</label>
        <select
          [(ngModel)]="nuevoCurso.especialidad_id"
          name="especialidad_id"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
        >
          <option value="" disabled>Seleccione Especialidad</option>
          <option
            *ngFor="let especialidad of especialidades"
            [value]="especialidad.id"
          >
            {{ especialidad.nombre }}
          </option>
        </select>
      </div>
    
      <!-- Tipo de Curso -->
      <div>
        <label class="block text-sm font-medium">Tipo de Curso</label>
        <select
          [(ngModel)]="nuevoCurso.tipo_curso_id"
          name="tipo_curso_id"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
        >
          <option value="" disabled>Seleccione Tipo</option>
          <option *ngFor="let tipo of tiposCurso" [value]="tipo.id">
            {{ tipo.nombre }}
          </option>
        </select>
      </div>
    
      <!-- Nombre del Curso -->
      <div>
        <label class="block text-sm font-medium">Nombre del Curso</label>
        <input
          type="text"
          [(ngModel)]="nuevoCurso.nombre"
          name="nombre"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Nombre del curso"
        />
      </div>
    
      <!-- Clave -->
      <div>
        <label class="block text-sm font-medium">Clave</label>
        <input
          type="text"
          [(ngModel)]="nuevoCurso.clave"
          name="clave"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Clave"
        />
      </div>
    
      <!-- Duración -->
      <div>
        <label class="block text-sm font-medium">Duración (Horas)</label>
        <input
          type="number"
          [(ngModel)]="nuevoCurso.duracion_horas"
          name="duracion_horas"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Duración en horas"
        />
      </div>
    </div>
    
    <!-- Descripción -->
    <div>
      <label class="block text-sm font-medium">Descripción</label>
      <textarea
        [(ngModel)]="nuevoCurso.descripcion"
        name="descripcion"
        required
        class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
        placeholder="Descripción del curso"
        #descripcion="ngModel"
      ></textarea>
      <div
        *ngIf="descripcion.invalid && descripcion.touched"
        class="text-red-500 text-sm"
      >
        La descripción es obligatoria.
      </div>
    </div>
    
    <!-- Nivel -->
    <div>
      <label class="block text-sm font-medium">Nivel</label>
      <select
        [(ngModel)]="nuevoCurso.nivel"
        name="nivel"
        required
        class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
      >
        <option value="" disabled>Seleccione Nivel</option>
        <option value="Básico">Básico</option>
        <option value="Intermedio">Intermedio</option>
        <option value="Avanzado">Avanzado</option>
      </select>
      <div
        *ngIf="!nuevoCurso.nivel && cursoForm.submitted"
        class="text-red-500 text-sm"
      >
        El nivel es obligatorio.
      </div>
    </div>

    <div class="flex space-x-4">
      <!-- Vigencia Inicio -->
      <div class="flex-1">
        <label class="block text-sm font-medium">Vigencia Inicio</label>
        <input
          type="date"
          [(ngModel)]="nuevoCurso.vigencia_inicio"
          name="vigencia_inicio"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Vigencia inicio"
        />
      </div>
    
      <!-- Fecha de Publicación -->
      <div class="flex-1">
        <label class="block text-sm font-medium">Fecha de Publicación</label>
        <input
          type="date"
          [(ngModel)]="nuevoCurso.fecha_publicacion"
          name="fecha_publicacion"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Fecha de publicación"
        />
      </div>
    
      <!-- Costo -->
      <div class="flex-1">
        <label class="block text-sm font-medium">Costo</label>
        <input
          type="number"
          [(ngModel)]="nuevoCurso.costo"
          name="costo"
          required
          class="mt-1 block w-full border border-gray-300 rounded-lg p-3 shadow-sm"
          placeholder="Costo del curso"
        />
      </div>
    </div>
    


    
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Objetivos del Curso</h2>

   <!-- Tabla de objetivos -->
<div class="overflow-x-auto">
  <!-- Tabla de objetivos del curso -->
  <table class="w-full border-collapse border border-gray-300 mt-8">
    <thead>
      <tr class="bg-gray-100">
        <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-1/4">
          Título
        </th>
        <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-3/4">
          Descripción
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          OBJETIVO DEL CURSO
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.objetivo"
            name="objetivo"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="3"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          PERFIL DE INGRESO
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.perfil_ingreso"
            name="perfil_ingreso"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="4"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          PERFIL DE EGRESO
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.perfil_egreso"
            name="perfil_egreso"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="5"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          PERFIL DEL DOCENTE / INSTRUCTOR
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.perfil_del_docente"
            name="perfil_del_docente"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="6"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          METODOLOGÍA DE CAPACITACIÓN
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.metodologia"
            name="metodologia"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="3"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          BIBLIOGRAFÍA
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.bibliografia"
            name="bibliografia"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="3"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          CRITERIOS DE ACREDITACIÓN
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.criteriosAcreditacion"
            name="criteriosAcreditacion"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="3"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td class="border border-gray-300 px-4 py-2 font-medium w-1/4">
          RECONOCIMIENTO AL ALUMNO
        </td>
        <td class="border border-gray-300 px-4 py-2 w-3/4">
          <textarea
            [(ngModel)]="nuevoCurso.objetivos.reconocimiento"
            name="reconocimiento"
            class="w-full border border-gray-300 rounded-md p-2 resize-none"
            rows="3"
          ></textarea>
        </td>
      </tr>
    </tbody>
  </table>
</div>


    <h2 class="text-2xl font-bold text-gray-800 mb-6">
      Contenido Programático
    </h2>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse border border-gray-300 mt-8">
        <thead>
          <tr class="bg-gray-100">
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-1/12">
              No.
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-2/12">
              Nombre del Tema
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-1/12">
              Tiempo (HRS)
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-2/12">
              Competencias a Desarrollar
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-2/12">
              Instrumentos de Evaluación
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-4/12">
              Actividades de Enseñanza-Aprendizaje
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold w-1/12">
              Acción
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let tema of nuevoCurso.contenidoProgramatico.temas; let i = index">
            <td class="border border-gray-300 px-4 py-2 text-center">{{ i + 1 }}</td>
            <td class="border border-gray-300 px-4 py-2">
              <textarea [(ngModel)]="tema.nombre" name="nombre_{{i}}" class="w-full border border-gray-300 px-2 py-1 rounded-md" rows="2"></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2 text-center">
              <input type="number" [(ngModel)]="tema.tiempo" name="tiempo_{{i}}" class="w-full border border-gray-300 px-2 py-1 rounded-md" />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <textarea [(ngModel)]="tema.competencias" name="competencias_{{i}}" class="w-full border border-gray-300 px-2 py-1 rounded-md" rows="2"></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <textarea [(ngModel)]="tema.evaluacion" name="evaluacion_{{i}}" class="w-full border border-gray-300 px-2 py-1 rounded-md" rows="2"></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <textarea [(ngModel)]="tema.actividades" name="actividades_{{i}}" class="w-full border border-gray-300 px-2 py-1 rounded-md" rows="3"></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2 text-center">
              <button type="button" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" (click)="eliminarTema(i)">
                Eliminar
              </button>
            </td>
          </tr>
          <tr>
            <td colspan="6" class="border border-gray-300 px-4 py-2 text-center">
              Total Horas
            </td>
            <td class="border border-gray-300 px-4 py-2 text-center">
              {{ calcularTotalHoras() }}
            </td>
          </tr>
        </tbody>
      </table>
      <button type="button" class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" (click)="agregarTema()">
        Agregar Tema
      </button>
    </div>
    
    

    <h2 class="text-2xl font-bold text-gray-800 mb-6">Materiales</h2>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse border border-gray-300 mt-8">
        <thead>
          <tr class="bg-gray-100">
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              Descripción
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              Unidad de Medida
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              Cantidad
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              10
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              15
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              20
            </th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">
              Acción
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let material of nuevoCurso.materiales; let j = index">
            <td class="border border-gray-300 px-4 py-2">
              <textarea
                [(ngModel)]="material.descripcion"
                name="descripcion{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              ></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <select
                [(ngModel)]="material.unidad_de_medida"
                name="unidad_de_medida{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              >
                <option *ngFor="let option of unitOptions" [value]="option.value">
                  {{ option.label }}
                </option>
              </select>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="material.cantidad"
                name="cantidad{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="material.cantidad10"
                name="cantidad10{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
                [value]="material.cantidad10 || ''"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="material.cantidad15"
                name="cantidad15{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
                [value]="material.cantidad15 || ''"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="material.cantidad20"
                name="cantidad20{{ j }}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
                [value]="material.cantidad20 || ''"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2 text-center">
              <button
                type="button"
                class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                (click)="eliminarMaterial(j)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <button
        type="button"
        class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        (click)="agregarMaterial()"
      >
        Agregar Material
      </button>
    </div>
    
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Equipamiento</h2>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse border border-gray-300 mt-8">
        <thead>
          <tr class="bg-gray-100">
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">Descripción</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">Unidad de Medida</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">Cantidad</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">10</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">15</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">20</th>
            <th class="border border-gray-300 px-4 py-2 text-left font-semibold">Acción</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let equipamiento of nuevoCurso.equipamiento; let k = index">
            <td class="border border-gray-300 px-4 py-2">
              <textarea
                [(ngModel)]="equipamiento.descripcion"
                name="descripcion{{k}}" 
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              ></textarea>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <select
                [(ngModel)]="equipamiento.unidad_de_medida"
                name="unidad_de_medida{{k}}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              >
                <option *ngFor="let option of unitOptions" [value]="option.value">
                  {{ option.label }}
                </option>
              </select>
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="equipamiento.cantidad"
                name="cantidad{{k}}" 
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="equipamiento.cantidad10"
                name="cantidad10{{k}}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="equipamiento.cantidad15"
                name="cantidad15{{k}}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2">
              <input
                type="number"
                [(ngModel)]="equipamiento.cantidad20"
                name="cantidad20{{k}}"
                class="border border-gray-300 rounded-md px-2 py-1 w-full"
              />
            </td>
            <td class="border border-gray-300 px-4 py-2 text-center">
              <button
                type="button"
                class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
                (click)="eliminarEquipamiento(k)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <button
        type="button"
        class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
        (click)="agregarEquipamiento()"
      >
        Agregar Equipamiento
      </button>
    </div>
    
  
 <!-- Botón para guardar -->
<div class="flex justify-end">
  <button
    type="submit"
    [disabled]="isSaving" 
    class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-lg shadow-md transition duration-300"
  >
    <i *ngIf="isSaving" class="loading circle icon"></i>
    Guardar Curso
  </button>
</div>

<!-- Alerta para mostrar mensajes -->
<div *ngIf="alertMessage" class="ui message" [ngClass]="{'success': alertType === 'success', 'error': alertType === 'error'}">
  <div class="header">
    {{ alertTitle }}
  </div>
  <p>{{ alertMessage }}</p>
</div>

  </form>
</div>
